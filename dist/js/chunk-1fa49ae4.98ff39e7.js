(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fa49ae4"],{3548:function(t,e,s){"use strict";var a=s("bb36");e["a"]={getAllPermissions:function(){return Object(a["a"])().get("permissions")},getAllRoles:function(){return Object(a["a"])().get("roles")},getRoleDetails:function(t){return Object(a["a"])().get("roles/".concat(t))},editRole:function(t,e){return Object(a["a"])().post("roles/".concat(t),e)},saveRole:function(t){return Object(a["a"])().post("roles",t)},saveAdmin:function(t){return Object(a["a"])().post("admins",t)},getAdminInfo:function(t){return Object(a["a"])().get("admins/".concat(t))},editAdmin:function(t,e){return Object(a["a"])().post("admins/".concat(t),e)}}},4731:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},[s("main-modal",{attrs:{id:"permissions",size:"md"},scopedSlots:t._u([{key:"header",fn:function(){return[s("h4",{staticClass:"font-weight-bold"},[s("span",{staticClass:"text-success-light"},[t._v("view: ")]),t._v("Permission")])]},proxy:!0},{key:"body",fn:function(){return[s("b-list-group",{staticClass:"m-0 p-0"},t._l(t.permissions,(function(e,a){return s("b-list-group-item",{key:a,staticClass:"text-primary border-0 font-size-18"},[t._v(" "+t._s(a+1)+"- "+t._s(e.name))])})),1)]},proxy:!0}])}),s("main-modal",{attrs:{id:"roleDetails",size:"lg"},scopedSlots:t._u([{key:"header",fn:function(){return["add"==t.typeOfModal?s("h4",{staticClass:"font-weight-bold"},[s("span",{staticClass:"text-warning"},[t._v("Add: ")]),t._v(" Role")]):s("h4",{staticClass:"font-weight-bold"},[s("span",{staticClass:"text-info"},[t._v("Edit: ")]),t._v(" Role")])]},proxy:!0},{key:"body",fn:function(){return[s("roleDetails",{attrs:{roleDetails:t.roleDetails,"type-of-modal":t.typeOfModal,requestLoading:t.requestLoading},on:{saveRole:t.saveRole,editRole:t.editRole}})]},proxy:!0}])}),s("b-row",[s("b-col",{staticClass:"mb-2 d-flex justify-content-between align-items-center",attrs:{lg:"12"}},[s("h3",[t._v("Roles")]),s("div",[s("router-link",{attrs:{to:{name:"admin"}}},[s("b-button",{staticClass:"add_button text-white",attrs:{variant:"warning"}},[s("i",{staticClass:"las la-arrow-left mr-3"}),t._v(" Go To Admin")])],1),s("b-button",{staticClass:"ml-3 add_button text-white",attrs:{variant:"warning"},on:{click:t.openCreateModal}},[t._v("Create Role"),s("i",{staticClass:"las la-plus ml-3"})])],1)]),s("b-col",{attrs:{lg:"12"}},[s("main-table",{staticClass:"mb-0 table-borderless",attrs:{fields:t.columns,list_url:"roles",reloadData:t.reloadTable}})],1)],1)],1)},o=[],i=s("5530"),n=(s("d3b7"),s("bcae")),l=s("3548"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[s("b-form",{on:{submit:function(e){return e.preventDefault(),a(t.saveRole)}}},[s("b-row",[s("b-col",{staticClass:"mb-3",attrs:{md:"12"}},[s("input-form",{attrs:{placeholder:"Ex: Admin",validate:"required",name:"name",label:"Role Name"},model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}})],1),s("b-col",{staticClass:"mb-3",attrs:{md:"12"}},[s("h5",[t._v(" Choose Permission")])]),t._l(t.allPermissions,(function(e,a){return s("b-col",{key:a,staticClass:"mb-3",attrs:{md:"2"}},[s("b-form-checkbox",{staticClass:"custom-checkbox-color-check",attrs:{value:e.id,color:"warning"},model:{value:t.role.permissions,callback:function(e){t.$set(t.role,"permissions",e)},expression:"role.permissions"}},[s("span",{staticClass:"font-size-12 text-primary"},[t._v(" "+t._s(e.name)+" ")])])],1)}))],2),"view"!=t.typeOfModal?s("b-row",[s("b-col",{staticClass:"mt-4",attrs:{md:"12"}},["add"==t.typeOfModal?s("div",{staticClass:"d-flex justify-content-center"},[t.requestLoading?s("b-button",{staticClass:"button-orange-modal"},[s("spinner-loading")],1):s("b-button",{staticClass:"button-orange-modal",attrs:{type:"submit"}},[s("i",{staticClass:"las la-plus"})])],1):t._e(),"edit"==t.typeOfModal?s("div",{staticClass:"d-flex justify-content-center"},[t.requestLoading?s("b-button",{staticClass:"button-blue-modal"},[s("spinner-loading")],1):s("b-button",{staticClass:"button-blue-modal",attrs:{type:"submit"}},[s("i",{staticClass:"las la-pen"})])],1):t._e()])],1):t._e()],1)]}}])})],1)},c=[],d=(s("b0c0"),s("d81d"),{props:{typeOfModal:{type:String},requestLoading:{type:Boolean},roleDetails:{type:Object}},data:function(){return{role:{name:"",permissions:[]},allPermissions:[]}},methods:{getAllPermissions:function(){var t=this;l["a"].getAllPermissions().then((function(e){t.allPermissions=e.data.data}))},saveRole:function(){this.roleDetails?this.$emit("editRole",Object(i["a"])(Object(i["a"])({},this.role),{},{_method:"PATCH"})):this.$emit("saveRole",this.role)}},watch:{},computed:{},mounted:function(){var t,e;this.roleDetails&&(this.role.name=null===(t=this.roleDetails)||void 0===t?void 0:t.name,this.role.permissions=null===(e=this.roleDetails)||void 0===e?void 0:e.permissions.map((function(t){return t.id})))},created:function(){this.getAllPermissions()}}),u=d,m=s("2877"),f=Object(m["a"])(u,r,c,!1,null,null,null),b=f.exports,h={components:{roleDetails:b},data:function(){return{columns:[{label:"Name",key:"name",class:"text-left"},{label:"Type",key:"type",class:"text-left"},{label:"Actions",key:"actions",class:"text-left",type:"actions",actions:[{icon:"las la-eye",color:"success",text:"View",actionName:"viewPermissions",actionParams:["id"]},{icon:"las la-pen",color:"info",text:"Edit",actionName:"showRoleInfo",actionParams:["id","name"]},{icon:"las la-trash-alt",color:"danger",text:"Delete",showAlert:!0,actionHeader:"Delete",titleHeader:"Role",textContent:"name",url:"roles"}]}],reloadTable:!1,requestLoading:!1,permissions:[],typeOfModal:"add",roleId:"",roleDetails:{}}},methods:{viewPermissions:function(t){var e=this;l["a"].getRoleDetails(t.id).then((function(t){e.permissions=t.data.data,e.$bvModal.show("permissions")}))},openCreateModal:function(){this.roleDetails={},this.typeOfModal="add",this.$bvModal.show("roleDetails")},saveRole:function(t){var e=this;this.requestLoading=!0,this.reloadTable=!1,l["a"].saveRole(t).then((function(t){e.reloadTable=!0,n["c"].showSnackbar("success",t.data.data),e.$bvModal.hide("roleDetails")})).finally((function(){e.requestLoading=!1}))},editRole:function(t){var e=this;this.requestLoading=!0,this.reloadTable=!1,l["a"].editRole(this.roleId,t).then((function(t){e.reloadTable=!0,n["c"].showSnackbar("success",t.data.data),e.$bvModal.hide("roleDetails")})).finally((function(){e.requestLoading=!1}))},showRoleInfo:function(t){var e=this;this.roleId=t.id,l["a"].getRoleDetails(t.id).then((function(s){var a=Object(i["a"])(Object(i["a"])({},t),{},{permissions:s.data.data});e.roleDetails=a,e.typeOfModal="edit",e.$bvModal.show("roleDetails")}))}},mounted:function(){n["c"].index()},created:function(){this.$root.$on("viewPermissions",this.viewPermissions),this.$root.$on("showRoleInfo",this.showRoleInfo)},beforeDestroy:function(){this.$root.$off("viewPermissions"),this.$root.$off("showRoleInfo")}},p=h,v=Object(m["a"])(p,a,o,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-1fa49ae4.98ff39e7.js.map