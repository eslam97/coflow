(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e9756"],{"8e2e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{attrs:{fluid:""}},[s("main-modal",{attrs:{id:"leadDetalilsModal",size:"lg"},scopedSlots:e._u([{key:"header",fn:function(){return[s("h4",{staticClass:"font-weight-bold"},[e._v("Business Request")])]},proxy:!0},{key:"body",fn:function(){return[s("lead-details",{attrs:{leadDetails:e.leadDetails,requestLoading:e.requestLoading},on:{makeBusinessRequest:e.acceptOrReject}})]},proxy:!0}])}),s("b-row",[s("b-col",{staticClass:"mb-2",attrs:{lg:"12"}},[s("h3",[e._v("Lead")])]),s("b-col",{attrs:{lg:"12"}},[s("main-table",{staticClass:"mb-0 table-borderless",attrs:{fields:e.columns,list_url:"leads",reloadData:e.reloadTable},on:{sortChanged:e.sortChanged}})],1)],1)],1)},n=[],l=(s("d3b7"),s("bcae")),i=s("bb36"),o={showLeadData:function(e){return Object(i["a"])().get("leads/".concat(e))},changeStatusLead:function(e,t){return Object(i["a"])().post("leads/".concat(e),t)}},c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[s("b-form",{on:{submit:function(t){return t.preventDefault(),a(e.makeBusinessRequest)}}},[s("b-row",[s("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[s("input-form",{attrs:{placeholder:"Ex: name@coflow.com",validate:"required|email",name:"Facility Email Address",label:"Facility Email Address"},model:{value:e.businessRequest.email,callback:function(t){e.$set(e.businessRequest,"email",t)},expression:"businessRequest.email"}})],1),s("b-col",{staticClass:"mb-3",attrs:{md:"8"}},[s("input-form",{attrs:{placeholder:"Ex: The Yoga Studio",validate:"required",name:"Facility Name",label:"Facility Name"},model:{value:e.businessRequest.name,callback:function(t){e.$set(e.businessRequest,"name",t)},expression:"businessRequest.name"}})],1),s("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[s("input-form",{attrs:{placeholder:"Ex: Owner",validate:"required",name:"Contact’s Role or Job",label:"Contact’s Role or Job"},model:{value:e.businessRequest.contact.job,callback:function(t){e.$set(e.businessRequest.contact,"job",t)},expression:"businessRequest.contact.job"}})],1),s("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[s("input-form",{attrs:{placeholder:"Ex: Eslam Ashraf",validate:"required",name:"Contact’s Full Name",label:"Contact’s Full Name"},model:{value:e.businessRequest.contact.name,callback:function(t){e.$set(e.businessRequest.contact,"name",t)},expression:"businessRequest.contact.name"}})],1),s("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[s("input-form",{attrs:{placeholder:"Ex: 0123456789",validate:"required|numeric",name:"Contact’s Phone Number",label:"Contact’s Phone Number"},model:{value:e.businessRequest.contact.phone,callback:function(t){e.$set(e.businessRequest.contact,"phone",t)},expression:"businessRequest.contact.phone"}})],1),e._l(e.businessRequest.links,(function(t,a){return s("b-col",{key:a,staticClass:"mb-3",attrs:{md:"6"}},[s("b-form-group",{staticClass:"position-relative",attrs:{label:"URL Links","label-for":"URL Links"}},[0!=a?s("span",{staticClass:"text-danger deleteLabelButton cursor-pointer",on:{click:function(t){return e.deleteLink(a)}}},[e._v("Delete ")]):e._e(),s("b-input-group",{scopedSlots:e._u([{key:"prepend",fn:function(){return[s("b-dropdown",{staticClass:"selectWithInput",attrs:{text:t.selectSocial?t.selectSocial:"Choose"}},e._l(e.filterLinks,(function(a,n){return s("b-dropdown-item",{key:n,on:{click:function(e){t.selectSocial=a}}},[e._v(" "+e._s(a)+" ")])})),1)]},proxy:!0}],null,!0)},[s("validation-provider",{staticClass:"flex-grow-1",attrs:{name:"URL Link "+(a+1),rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.errors;return[s("b-form-input",{class:[{"is-invalid":n.length>0}],attrs:{id:"mm",placeholder:"Ex: https://www.google.com",disabled:!t.selectSocial},model:{value:t.link,callback:function(s){e.$set(t,"link",s)},expression:"item.link"}})]}}],null,!0)})],1)],1)],1)})),e.allLinks.length!==e.businessRequest.links.length?s("b-col",{attrs:{md:"12"}},[s("span",{staticClass:"text-warning cursor-pointer",on:{click:e.addNewLink}},[e._v("+ Add another Link")])]):e._e()],2),s("b-row",[s("b-col",{staticClass:"mt-4",attrs:{md:"12"}},[e.requestLoading?s("p",{staticClass:"text-center"},[s("spinner-loading",{attrs:{text:"Loading"}})],1):s("div",{staticClass:"d-flex justify-content-center gap_10"},[s("b-button",{staticClass:"container_button_blue ml-2",attrs:{type:"submit"},on:{click:function(t){e.selectedStatus="accepted"}}},[s("span",[e._v("ACCEPT")])]),s("b-button",{staticClass:"gradient-orange-button box_orange_shadow",attrs:{type:"submit"},on:{click:function(t){e.selectedStatus="rejected"}}},[s("span",[e._v("REJECT")])])],1)])],1)],1)]}}])})],1)},u=[],r=s("2909"),d=s("5530"),b=(s("a434"),s("159b"),s("caad"),s("2532"),s("c740"),s("b0c0"),{props:{requestLoading:{type:Boolean,default:!1},leadDetails:{type:Object,required:!1}},data:function(){return{allLinks:["Website","Facebook","Twitter","Instagram"],businessRequest:{email:"",name:"",contact:{name:"",job:"",phone:""},links:[{selectSocial:"",link:""}]},selectedStatus:""}},methods:{addNewLink:function(){this.businessRequest.links.push({selectSocial:"",link:""})},deleteLink:function(e){this.businessRequest.links.splice(e,1)},makeBusinessRequest:function(){this.$emit("makeBusinessRequest",Object(d["a"])(Object(d["a"])({},this.businessRequest),{},{_method:"put",status:this.selectedStatus}))}},watch:{},computed:{filterLinks:function(){var e=Object(r["a"])(this.allLinks);return this.businessRequest.links.forEach((function(t){if(e.includes(t.selectSocial)){var s=e.findIndex((function(e){return e===t.selectSocial}));console.log(s),e.splice(s,1)}})),e}},created:function(){this.leadDetails&&(this.businessRequest={email:this.leadDetails.email,name:this.leadDetails.name,contact:this.leadDetails.contacts[0],links:this.leadDetails.links})}}),m=b,f=s("2877"),p=Object(f["a"])(m,c,u,!1,null,null,null),h=p.exports,k={components:{leadDetails:h},data:function(){return{columns:[{label:"Name",key:"name",class:"text-left"},{label:"Date",key:"date",class:"text-left",sortable:!0},{label:"Status",key:"status",class:"text-left",type:"status"},{label:"Actions",key:"actions",class:"text-left",type:"actions",actions:[{icon:"las la-eye",color:"success-light",text:"View",actionName:"viewLead",actionParams:["id"]}]}],leadDetails:{},requestLoading:!1,selectedLead:"",reloadTable:!1}},methods:{sortChanged:function(e){console.log(e)},viewLead:function(e){var t=this;this.selectedLead=e.id,o.showLeadData(e.id).then((function(e){t.leadDetails=e.data.data,t.$bvModal.show("leadDetalilsModal")}))},acceptOrReject:function(e){var t=this;this.requestLoading=!0,this.reloadTable=!1,o.changeStatusLead(this.selectedLead,e).then((function(e){l["c"].showSnackbar("success",e.data.message),t.reloadTable=!0,t.$bvModal.hide("leadDetalilsModal")})).finally((function(){t.requestLoading=!1}))}},mounted:function(){l["c"].index()},beforeDestroy:function(){this.$root.$off("viewLead",this.viewLead)},created:function(){this.$root.$on("viewLead",this.viewLead)}},v=k,q=Object(f["a"])(v,a,n,!1,null,null,null);t["default"]=q.exports}}]);
//# sourceMappingURL=chunk-2d0e9756.c42c8bd7.js.map