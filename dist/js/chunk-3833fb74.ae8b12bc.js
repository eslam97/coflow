(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3833fb74"],{"66ba":function(t,e,s){"use strict";var l=s("bb36");e["a"]={getAllFlows:function(){return Object(l["a"])().get("all-flows")},addNewFlow:function(t){return Object(l["a"])().post("flows",t)},getFlowsDetails:function(t){return Object(l["a"])().get("flows/".concat(t))},editFlow:function(t,e){return Object(l["a"])().post("flows/".concat(t),e)}}},bfca:function(t,e,s){"use strict";s.r(e);var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},[s("main-modal",{attrs:{id:"scheduleDetailsModal",size:"lg"},scopedSlots:t._u([{key:"header",fn:function(){return["add"==t.typeOfModal?s("h4",{staticClass:"font-weight-bold"},[s("span",{staticClass:"text-warning"},[t._v("Set: ")]),t._v(" Flow Slots")]):"view"==t.typeOfModal?s("h4",{staticClass:"font-weight-bold"},[s("span",{staticClass:"text-success-light"},[t._v("View: ")]),t._v(" Flow Slots")]):s("h4",{staticClass:"font-weight-bold"},[s("span",{staticClass:"text-info"},[t._v("Manage: ")]),t._v(" FlowSlots")])]},proxy:!0},"edit"==t.typeOfModal?{key:"actions",fn:function(){return[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"modal-embed-actions cursor-pointer",on:{click:t.deleteSlot}},[s("i",{staticClass:"las la-trash-alt text-danger font-size-20"})]),s("div",{staticClass:"modal-embed-actions"},[s("div",{staticClass:"d-flex justify-content-between"},[s("span",{staticClass:"text-info font-weight-bold font-size-12 mr-3"},[t._v("Active")]),s("div",{staticClass:"custom-control custom-switch custom-switch-text custom-control-inline custom-switch-color mr-0"},[s("div",{staticClass:"custom-switch-inner"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.slideStatus,expression:"slideStatus"}],staticClass:"custom-control-input bg-info",attrs:{type:"checkbox",id:"status"},domProps:{checked:Array.isArray(t.slideStatus)?t._i(t.slideStatus,null)>-1:t.slideStatus},on:{change:[function(e){var s=t.slideStatus,l=e.target,a=!!l.checked;if(Array.isArray(s)){var o=null,i=t._i(s,o);l.checked?i<0&&(t.slideStatus=s.concat([o])):i>-1&&(t.slideStatus=s.slice(0,i).concat(s.slice(i+1)))}else t.slideStatus=a},function(e){return t.changeStatus(t.scheduleDetailsFront.id,t.scheduleDetailsFront.status)}]}}),s("label",{staticClass:"custom-control-label",attrs:{for:"status"}})])])])])])]},proxy:!0}:null,{key:"body",fn:function(){return[s("schedule-details",{attrs:{requestLoading:t.requestLoading,scheduleDetails:t.scheduleDetails,allFlows:t.allFlows,typeOfModal:t.typeOfModal},on:{addSlots:t.addSlots,editSlot:t.editSlot}})]},proxy:!0}],null,!0)}),s("b-row",[s("b-col",{staticClass:"mb-4 d-flex justify-content-between align-items-center",attrs:{lg:"12"}},[s("h3",[t._v("Schedule")]),s("div",[s("b-button",{staticClass:"add_button text-white",attrs:{variant:"warning"},on:{click:t.openPopup}},[t._v(" Manage Schedule"),s("i",{staticClass:"las la-calendar ml-3"})])],1)]),s("b-col",{staticClass:"mb-4 d-flex justify-content-center align-items-center",attrs:{md:"12"}},[s("ul",{staticClass:"levels-list m-0"},t._l(t.levels,(function(e,l){return s("li",{key:l,staticClass:"p-1"},[s("i",{staticClass:"fas fa-circle ml-3 mr-2",class:"circle-"+e.color}),t._v(t._s(e.text)+" ")])})),0)]),t.requestLoading?s("spinner-loading"):t._e(),t.allSlots.length>0?s("b-col",{attrs:{lg:"12"}},[s("b-card",{staticClass:"overflow-auto text-center schedule-card"},[s("b-row",{staticClass:"flex-nowrap"},t._l(t.days,(function(e,l){return s("b-col",{key:l,staticClass:"schedule-col px-0"},[s("h6",{staticClass:"mb-3 pt-3 schedule-header"},[t._v(t._s(e.key))]),t._l(t.allSlots.filter((function(t){return t.day===e.value})),(function(e,l){return s("div",{key:l,staticClass:"p-2 d-flex justify-content-center align-items-center cursor-pointer",class:"inactive"===e.status?"slot-box-grey":"slot-box-red",on:{click:function(s){return t.showScheduleToEdit(e)}}},[s("ul",{staticClass:"pl-0"},[e.ladies_only?s("li",{staticClass:"ladies-only-tag"},[t._v("LADIES ONLY")]):t._e(),s("li",[t._v(t._s(e.from)+" - "+t._s(e.to))]),s("li",[t._v(t._s(e.flow.name))]),s("li",[t._v(t._s(e.instructor))])])])}))],2)})),1)],1)],1):s("b-col",{staticClass:"text-center text-black",attrs:{md:"12"}},[s("b-card",[t._v(" No Available slots")])],1)],1)],1)},a=[],o=(s("d3b7"),s("99af"),s("b0c0"),s("bcae")),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("validationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var l=e.handleSubmit;return[s("b-form",{on:{submit:function(e){return e.preventDefault(),l(t.addSlots)}}},[s("b-row",[s("b-col",{staticClass:"mb-3",attrs:{md:"12"}},[s("main-select",{attrs:{labelTitle:"Flow",validate:"required",name:"Flow",placeholder:"Pick flow",options:t.allFlows,label:"name",disabled:"edit"===t.typeOfModal,reduce:function(t){return t.id}},model:{value:t.schedule.flow_id,callback:function(e){t.$set(t.schedule,"flow_id",e)},expression:"schedule.flow_id"}})],1),t._l(t.schedule.slots,(function(e,l){return s("b-col",{key:l,staticClass:"position-relative mb-4 border-bottom",attrs:{md:"12"}},[s("b-row",{staticClass:"d-flex align-items-center mb-4"},[s("b-col",{attrs:{md:"3"}},[s("main-select",{attrs:{labelTitle:"Day of the week",validate:"required",name:"Day "+(l+1),placeholder:"Choose",options:t.allDays,label:"key",reduce:function(t){return t.value}},model:{value:e.day,callback:function(s){t.$set(e,"day",s)},expression:"slot.day"}})],1),s("b-col",{attrs:{md:"3"}},[s("input-form",{attrs:{placeholder:"00:00",validate:"required",name:"From "+(l+1),label:"From",type:"time"},model:{value:e.from,callback:function(s){t.$set(e,"from",s)},expression:"slot.from"}})],1),s("b-col",{attrs:{md:"3"}},[s("input-form",{attrs:{placeholder:"00:00",alidate:"'required'",name:"To "+(l+1),label:"To",type:"time"},model:{value:e.to,callback:function(s){t.$set(e,"to",s)},expression:"slot.to"}})],1),s("b-col",{attrs:{md:"3"}},[s("main-select",{attrs:{labelTitle:"Instructor",validate:"required",name:"Instructor "+(l+1),placeholder:"Pick instructor",options:t.schedule.flow_id?t.allFlows.find((function(e){return e.id===t.schedule.flow_id})).instructors:"",label:"first_name",reduce:function(t){return t.first_name}},model:{value:e.instructor,callback:function(s){t.$set(e,"instructor",s)},expression:"slot.instructor"}})],1),s("b-col",[s("b-form-checkbox",{staticClass:"custom-checkbox-color-check mb-2 mr-sm-2 mb-sm-0",attrs:{type:"checkbox",label:"Ladies only",name:"Ladies only "+(l+1),color:"warning"},model:{value:e.ladies_only,callback:function(s){t.$set(e,"ladies_only",s)},expression:"slot.ladies_only"}},[t._v(" Ladies Only Class ")])],1)],1),0!=l?s("span",{staticClass:"text-danger deleteLabelButton cursor-pointer",on:{click:function(e){return t.deleteSlot(l)}}},[t._v("Delete")]):t._e()],1)})),s("b-col",{staticClass:"mb-3",attrs:{md:"12"}},["add"===t.typeOfModal?s("span",{staticClass:"text-warning cursor-pointer deleteLabelButton ",on:{click:t.addNewSlot}},[t._v("+Add another slot")]):t._e()])],2),"view"!=t.typeOfModal?s("b-row",[s("b-col",{staticClass:"mt-4",attrs:{md:"12"}},["add"==t.typeOfModal?s("div",{staticClass:"d-flex justify-content-center"},[t.requestLoading?s("b-button",{staticClass:"button-orange-modal"},[s("spinner-loading")],1):s("b-button",{staticClass:"button-orange-modal",attrs:{type:"submit"}},[s("i",{staticClass:"las la-plus"})])],1):t._e(),"edit"==t.typeOfModal?s("div",{staticClass:"d-flex justify-content-center"},[t.requestLoading?s("b-button",{staticClass:"button-blue-modal"},[s("spinner-loading")],1):s("b-button",{staticClass:"button-blue-modal",attrs:{type:"submit"}},[s("i",{staticClass:"las la-pen"})])],1):t._e()])],1):t._e()],1)]}}])})],1)},n=[],c=s("5530"),d=(s("a434"),{props:{requestLoading:{type:Boolean,default:!1},typeOfModal:{type:String,default:"add"},scheduleDetails:{type:Object},allFlows:{type:Object}},data:function(){return{schedule:{slots:[{id:"",day:"",from:"",to:"",instructor:"",ladies_only:0,status:""}],status:"active",flow_id:"",flow_name:""},allDays:[{key:"Saturday",value:"saturday"},{key:"Sunday",value:"sunday"},{key:"Monday",value:"monday"},{key:"Tuesday",value:"tuesday"},{key:"Wednesday",value:"wednesday"},{key:"Thursday",value:"thursday"},{key:"Friday",value:"friday"}]}},methods:{addSlots:function(){if("add"===this.typeOfModal)this.$emit("addSlots",this.schedule);else{this.schedule.slots[0].ladies_only=this.schedule.slots[0].ladies_only?1:0;var t=Object(c["a"])(Object(c["a"])({flow_id:this.schedule.flow_id},this.schedule.slots[0]),{},{_method:"put"});this.$emit("editSlot",this.schedule.slots[0].id,t)}},addNewSlot:function(){this.schedule.slots.push({days:[],from:"",to:"",instructor:"",ladies_only:""})},deleteSlot:function(t){this.schedule.slots.splice(t,1)}},created:function(){this.scheduleDetails&&(this.schedule={slots:[{id:this.scheduleDetails.slotId,day:this.scheduleDetails.day,from:this.scheduleDetails.from,to:this.scheduleDetails.to,instructor:this.scheduleDetails.instructor,ladies_only:this.scheduleDetails.ladies_only,status:this.scheduleDetails.status}],status:"active",flow_id:this.scheduleDetails.flow_id,flow_name:this.scheduleDetails.flow.name}),console.log(this.schedule)}}),u=d,r=s("2877"),h=Object(r["a"])(u,i,n,!1,null,null,null),f=h.exports,b=s("bb36"),y={getAllSlots:function(){return Object(b["a"])().get("schedules")},setNewSlot:function(t){return Object(b["a"])().post("schedules",t)},getScheduleDetails:function(t){return Object(b["a"])().get("schedules/".concat(t))},editSchedule:function(t,e){return Object(b["a"])().post("schedules/".concat(t),e)}},m=s("66ba"),v=s("5636"),p=s("0c12"),w={data:function(){return{requestLoading:!1,typeOfModal:"add",scheduleDetails:{},scheduleId:"",allFlows:[],allSlots:[],levels:[{text:"ALL LEVELS",value:"all",color:"blue"},{text:"BEGINNER",value:"beginner",color:"cyan"},{text:"INTERMEDIATE",value:"intermediate",color:"orange"},{text:"ADVANCED",value:"advanced",color:"red"},{text:"LADIES ONLY",color:"pink"}],days:[{key:"SUN",value:"sunday"},{key:"MON",value:"monday"},{key:"TUE",value:"tuesday"},{key:"WED",value:"wednesday"},{key:"THU",value:"thursday"},{key:"FRI",value:"friday"},{key:"SAT",value:"saturday"}],scheduleDetailsFront:{}}},components:{scheduleDetails:f},computed:{slideStatus:function(){return"active"===this.scheduleDetailsFront.status}},methods:{openPopup:function(){this.scheduleId="",this.typeOfModal="add",this.scheduleDetails=!1,this.$bvModal.show("scheduleDetailsModal")},addSlots:function(t){var e=this;this.requestLoading=!0,y.setNewSlot(t).then((function(t){o["c"].showSnackbar("success",t.data.message),e.getSchedule(),e.$bvModal.hide("scheduleDetailsModal")})).finally((function(){e.requestLoading=!1}))},editSlot:function(t,e){var s=this;this.requestLoading=!0,y.editSchedule(t,e).then((function(t){o["c"].showSnackbar("success",t.data.message),s.getSchedule(),s.$bvModal.hide("scheduleDetailsModal")})).finally((function(){s.requestLoading=!1}))},showDetails:function(t){var e=this;this.scheduleId="",this.typeOfModal="view",y.getScheduleDetails(t.id).then((function(t){console.log(t.data.data),e.scheduleDetails=t.data.data,e.$bvModal.show("scheduleDetailsModal")}))},showScheduleToEdit:function(t){var e=this;this.typeOfModal="edit",this.scheduleDetailsFront=t,y.getScheduleDetails(t.id).then((function(s){e.scheduleDetails=s.data.data,e.scheduleDetails.slotId=t.id,console.log(e.scheduleDetails),e.$bvModal.show("scheduleDetailsModal")}))},getAllFlows:function(){var t=this;this.requestLoading=!0,m["a"].getAllFlows().then((function(e){t.allFlows=e.data.data,t.requestLoading=!1}))},getSchedule:function(){var t=this;this.requestLoading=!0,y.getAllSlots().then((function(e){t.allSlots=e.data.data.data,t.requestLoading=!1}))},deleteSlot:function(){p["a"].$emit("openDeleteModal",{actionHeader:"Delete",titleHeader:"Slot",textContent:"".concat(this.scheduleDetailsFront.flow.name," in ").concat(this.scheduleDetailsFront.day," "),question:"Are You Sure You Want Delete This Slot?",textDeleteButton:"YES, Delete",textCancelButton:"NO, CANCEL",icon:"las la-trash-alt",type:"delete",actionOnAlert:"",text:"Delete",url:"schedules",rowId:this.scheduleDetailsFront.id})},changeStatus:function(t,e){var s=this,l={schedule_id:t,status:this.scheduleDetailsFront.status?"inactive":"active",type:"schedule"};v["a"].changeStatus(l).then((function(t){s.scheduleDetailsFront.status=!s.scheduleDetailsFront.status,o["c"].showSnackbar("success",t.data.message)}))}},created:function(){var t=this;this.getSchedule(),this.getAllFlows(),p["a"].$on("reloadTableAfterDelete",(function(e){t.$bvModal.hide("scheduleDetailsModal"),t.getSchedule(),o["c"].showSnackbar("success","Data deleted successfully")}))},beforeDestroy:function(){},mounted:function(){o["c"].index()}},g=w,S=Object(r["a"])(g,l,a,!1,null,null,null);e["default"]=S.exports}}]);
//# sourceMappingURL=chunk-3833fb74.ae8b12bc.js.map