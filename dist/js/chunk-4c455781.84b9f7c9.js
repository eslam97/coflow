(window.webpackJsonp = window.webpackJsonp || []).push([['chunk-4c455781'], { aa08: function (t, e, a) {}, c605: function (t, e, a) { 'use strict'; a('aa08') }, d1e0: function (t, e, a) { 'use strict'; a.r(e); var o = function () { var t = this; var e = t.$createElement; var a = t._self._c || e; return a('b-container', { attrs: { fluid: '' } }, [a('main-modal', { attrs: { id: 'promotionDetails', size: 'lg' }, scopedSlots: t._u([{ key: 'header', fn: function () { return [t.typeOfModal == 'add' ? a('h4', { staticClass: 'font-weight-bold' }, [a('span', { staticClass: 'text-warning' }, [t._v('Add: ')]), t._v(' Promotion')]) : t._e()] }, proxy: !0 }, { key: 'body', fn: function () { return [a('promotion-details', { attrs: { requestLoading: t.requestLoading }, on: { savePromotion: t.savePromotion } })] }, proxy: !0 }]) }), a('main-modal', { attrs: { id: 'promotionEdit', size: 'lg' }, scopedSlots: t._u([{ key: 'header', fn: function () { return [a('h4', { staticClass: 'font-weight-bold' }, [a('span', { staticClass: 'text-info' }, [t._v('Edit: ')]), t._v(' Promotion')])] }, proxy: !0 }, { key: 'body', fn: function () { return [a('ValidationObserver', { scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.handleSubmit; return [a('b-form', { on: { submit: function (e) { return e.preventDefault(), o(t.editPromotion) } } }, [a('b-row', [a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('b-form-group', { attrs: { label: 'start date', 'label-for': 'start date' } }, [a('validation-provider', { attrs: { name: 'start_date', rules: 'required' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('flat-pickr', { class: ['form-control bg-white', { 'is-invalid': o.length > 0 }], attrs: { placeholder: 'start date', name: 'start', config: { minDate: 'today' } }, model: { value: t.editPromotions.start_date, callback: function (e) { t.$set(t.editPromotions, 'start_date', e) }, expression: 'editPromotions.start_date' } }), a('small', { staticClass: 'text-danger' }, [t._v(t._s(o[0]))])] } }], null, !0) })], 1)], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('b-form-group', { attrs: { label: 'end date', 'label-for': 'end date' } }, [a('validation-provider', { attrs: { name: 'end_date', rules: 'required' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('flat-pickr', { class: ['form-control bg-white', { 'is-invalid': o.length > 0 }], attrs: { name: 'end', config: { minDate: 'today' }, placeholder: 'end date' }, model: { value: t.editPromotions.end_date, callback: function (e) { t.$set(t.editPromotions, 'end_date', e) }, expression: 'editPromotions.end_date' } }), a('small', { staticClass: 'text-danger' }, [t._v(t._s(o[0]))])] } }], null, !0) })], 1)], 1)], 1), a('b-row', [a('b-col', { staticClass: 'mt-4', attrs: { md: '12' } }, [a('div', { staticClass: 'd-flex justify-content-center' }, [t.requestLoading ? a('b-button', { staticClass: 'button-blue-modal' }, [a('spinner-loading')], 1) : a('b-button', { staticClass: 'button-blue-modal', attrs: { type: 'submit' } }, [a('i', { staticClass: 'las la-pen' })])], 1)])], 1)], 1)] } }]) })] }, proxy: !0 }]) }), a('b-row', [a('b-col', { staticClass: 'mb-4 d-flex justify-content-between align-items-center', attrs: { lg: '12' } }, [a('h3', [t._v('Promotions')]), a('div', [a('b-button', { directives: [{ name: 'b-modal', rawName: 'v-b-modal:promotionDetails', arg: 'promotionDetails' }], staticClass: 'add_button text-white', attrs: { variant: 'warning' } }, [t._v('Create Promotion'), a('i', { staticClass: 'las la-plus ml-3' })])], 1)]), a('b-col', { staticClass: 'mb-2 d-flex justify-content-between align-items-center', attrs: { lg: '12' } }, [a('div', { staticClass: 'w-50 pr-2' }, [a('b-button', { class: ['w-100 promotion_button py-2', { activePromotion: t.isSelected('current') }], on: { click: function (e) { t.type = 'current', t.pagination.currentPage = 1 } } }, [t._v(' Current ')])], 1), a('div', { staticClass: 'w-50 pl-2' }, [a('b-button', { class: ['w-100 promotion_button py-2', { activePromotion: t.isSelected('history') }], on: { click: function (e) { t.type = 'history', t.pagination.currentPage = 1 } } }, [t._v(' History ')])], 1)]), a('b-col', { attrs: { lg: '12' } }, [a('b-table', { staticClass: 'mb-0 table-borderless', attrs: { busy: t.loadingTable, 'show-empty': '', responsive: '', items: t.data, fields: t.columns, 'sort-icon-left': '', 'primary-key': 'name', id: 'my-table', 'tbody-transition-props': t.transProps }, scopedSlots: t._u([{ key: 'table-busy', fn: function () { return [a('div', { staticClass: 'text-center text-danger my-2' }, [a('b-spinner', { attrs: { type: 'grow', label: 'Loading...', variant: 'primary' } })], 1)] }, proxy: !0 }, { key: 'cell(actions)', fn: function (e) { return [t.type === 'current' ? a('b-button', { staticClass: 'w-100 rounded-0', attrs: { variant: 'danger' }, on: { click: function (a) { return t.end(e.item.id, e.item.offer_title) } } }, [t._v('End')]) : a('b-button', { staticClass: 'w-100 rounded-0', attrs: { variant: 'info' }, on: { click: function (a) { return t.reEnd(e.item.id) } } }, [t._v(' Re-Add')])] } }]) }), t.pagination.total > t.pagination.per_page ? a('b-pagination', { staticClass: 'mb-3 mt-1 mt-sm-0', attrs: { 'total-rows': t.pagination.total, 'per-page': t.pagination.per_page, 'first-number': '', 'last-number': '', 'prev-class': 'prev-item', 'next-class': 'next-item', align: 'right' }, on: { input: t.getAllData }, model: { value: t.pagination.currentPage, callback: function (e) { t.$set(t.pagination, 'currentPage', e) }, expression: 'pagination.currentPage' } }) : t._e()], 1)], 1)], 1) }; var r = []; var i = (a('d3b7'), a('bcae')); var n = (a('99af'), a('bb36')); var s = { getAllPromotions: function (t, e) { return Object(n.a)().get('promotions?page='.concat(t, '&type=').concat(e)) }, addPromotion: function (t) { return Object(n.a)().post('promotions', t) }, editPromotion: function (t, e) { return Object(n.a)().post('promotions/'.concat(t), e) } }; var l = a('0c12'); var c = function () { var t = this; var e = t.$createElement; var a = t._self._c || e; return a('div', [a('ValidationObserver', { scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.handleSubmit; return [a('b-form', { on: { submit: function (e) { return e.preventDefault(), o(t.savePromotion) } } }, [a('b-row', [a('b-col', { staticClass: 'mb-3', attrs: { md: '4' } }, [a('main-select', { attrs: { labelTitle: 'Promotion Type', validate: 'required', name: 'promotion_type', placeholder: 'Choose', options: t.allPromotionTypes }, model: { value: t.promotion_type, callback: function (e) { t.promotion_type = e }, expression: 'promotion_type' } })], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '8' } }, [a('input-form', { attrs: { placeholder: 'Ex: offer_title', validate: 'required', name: 'offer_title', label: 'Offer Title' }, model: { value: t.info.offer_title, callback: function (e) { t.$set(t.info, 'offer_title', e) }, expression: 'info.offer_title' } })], 1), t.promotion_type === 'package' ? a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('input-form', { attrs: { placeholder: 'Ex: offer', validate: 'required', name: 'offer', label: 'Offer' }, model: { value: t.packages.package, callback: function (e) { t.$set(t.packages, 'package', e) }, expression: 'packages.package' } })], 1) : t._e(), t.promotion_type === 'discount' ? a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('b-form-group', { staticClass: 'position-relative', attrs: { label: 'offer', 'label-for': 'offer' } }, [a('b-input-group', { attrs: { append: '%' } }, [a('validation-provider', { staticClass: 'flex-grow-1', attrs: { name: 'offer', rules: 'required|numeric' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('b-form-input', { class: [{ 'is-invalid': o.length > 0 }], attrs: { id: 'mm', placeholder: '0.0' }, model: { value: t.discount.discount_price_egp, callback: function (e) { t.$set(t.discount, 'discount_price_egp', e) }, expression: 'discount.discount_price_egp' } })] } }], null, !0) })], 1)], 1)], 1) : t._e(), t.promotion_type === 'buy_x get_y' ? a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('b-form-group', { staticClass: 'position-relative', attrs: { label: 'offer 1', 'label-for': 'offer 1' } }, [a('b-input-group', { attrs: { prepend: 'buy_x' } }, [a('validation-provider', { staticClass: 'flex-grow-1', attrs: { name: 'buy_x', rules: 'required' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('b-form-input', { class: [{ 'is-invalid': o.length > 0 }], attrs: { id: 'mm1', placeholder: 'x' }, model: { value: t.buy2Get1.buy_x, callback: function (e) { t.$set(t.buy2Get1, 'buy_x', e) }, expression: 'buy2Get1.buy_x' } })] } }], null, !0) })], 1), a('b-input-group', { attrs: { prepend: 'get_y' } }, [a('validation-provider', { staticClass: 'flex-grow-1', attrs: { name: 'buy_y', rules: 'required' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('b-form-input', { class: [{ 'is-invalid': o.length > 0 }], attrs: { id: 'mm1', placeholder: 'y' }, model: { value: t.buy2Get1.get_y, callback: function (e) { t.$set(t.buy2Get1, 'get_y', e) }, expression: 'buy2Get1.get_y' } })] } }], null, !0) })], 1)], 1)], 1) : t._e(), a('b-col', { staticClass: 'mb-3', attrs: { md: '3' } }, [a('b-form-group', { attrs: { label: 'start date', 'label-for': 'start date' } }, [a('validation-provider', { attrs: { name: 'start_date', rules: 'required' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('flatPickr', { class: ['form-control bg-white', { 'is-invalid': o.length > 0 }], attrs: { config: { minDate: 'today' }, placeholder: 'start date' }, model: { value: t.info.start_date, callback: function (e) { t.$set(t.info, 'start_date', e) }, expression: 'info.start_date' } }), a('small', { staticClass: 'text-danger' }, [t._v(t._s(o[0]))])] } }], null, !0) })], 1)], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '3' } }, [a('b-form-group', { attrs: { label: 'end date', 'label-for': 'end date' } }, [a('validation-provider', { attrs: { name: 'end_date', rules: 'required' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('flatPickr', { class: ['form-control bg-white', { 'is-invalid': o.length > 0 }], attrs: { config: { minDate: 'today' }, placeholder: 'end date' }, model: { value: t.info.end_date, callback: function (e) { t.$set(t.info, 'end_date', e) }, expression: 'info.end_date' } }), a('small', { staticClass: 'text-danger' }, [t._v(t._s(o[0]))])] } }], null, !0) })], 1)], 1)], 1), t.promotion_type === 'package' ? a('b-row', [a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('input-form', { attrs: { placeholder: 'Ex: 0.0', validate: { regex: /^\d{1,10}(\.\d{1,10})?$/, required: !0 }, name: 'price_egp', label: 'price_egp' }, model: { value: t.packages.price_egp, callback: function (e) { t.$set(t.packages, 'price_egp', e) }, expression: 'packages.price_egp' } })], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('input-form', { attrs: { placeholder: 'Ex: 0.0', validate: { regex: /^\d{1,10}(\.\d{1,10})?$/, required: !0 }, name: 'discount_price_egp', label: 'discount_price_egp' }, model: { value: t.packages.discount_price_egp, callback: function (e) { t.$set(t.packages, 'discount_price_egp', e) }, expression: 'packages.discount_price_egp' } })], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('input-form', { attrs: { placeholder: 'Ex: 0.0', validate: { regex: /^\d{1,10}(\.\d{1,10})?$/, required: !1 }, name: 'price_dollar', label: 'price_dollar' }, model: { value: t.packages.price_dollar, callback: function (e) { t.$set(t.packages, 'price_dollar', e) }, expression: 'packages.price_dollar' } })], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('input-form', { attrs: { placeholder: 'Ex: 0.0', validate: { regex: /^\d{1,10}(\.\d{1,10})?$/, required: !1 }, name: 'discount_price_dollar', label: 'discount_price_dollar' }, model: { value: t.packages.discount_price_dollar, callback: function (e) { t.$set(t.packages, 'discount_price_dollar', e) }, expression: 'packages.discount_price_dollar' } })], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('input-form', { attrs: { placeholder: 'Ex: 0.0', validate: { regex: /^\d{1,10}(\.\d{1,10})?$/, required: !1 }, name: 'price_euro', label: 'price_euro' }, model: { value: t.packages.price_euro, callback: function (e) { t.$set(t.packages, 'price_euro', e) }, expression: 'packages.price_euro' } })], 1), a('b-col', { staticClass: 'mb-3', attrs: { md: '6' } }, [a('input-form', { attrs: { placeholder: 'Ex: 0.0', validate: { regex: /^\d{1,10}(\.\d{1,10})?$/, required: !1 }, name: 'discount_price_euro', label: 'discount_price_euro' }, model: { value: t.packages.discount_price_euro, callback: function (e) { t.$set(t.packages, 'discount_price_euro', e) }, expression: 'packages.discount_price_euro' } })], 1)], 1) : t._e(), a('b-row', [a('b-col', { staticClass: 'mb-3', attrs: { md: '12' } }, [a('b-form-group', { attrs: { label: 'Description', 'label-for': 'Description' } }, [a('ValidationProvider', { ref: 'Description', attrs: { name: 'description', rules: 'required' }, scopedSlots: t._u([{ key: 'default', fn: function (e) { var o = e.errors; return [a('b-form-textarea', { class: o.length > 0 ? ' is-invalid' : '', attrs: { placeholder: 'Description...', rows: '2' }, model: { value: t.info.description, callback: function (e) { t.$set(t.info, 'description', e) }, expression: 'info.description' } }), a('div', { staticClass: 'invalid-feedback' }, [a('span', [t._v(t._s(o[0]))])])] } }], null, !0) })], 1)], 1)], 1), a('b-row', [a('b-col', { staticClass: 'mt-4', attrs: { md: '12' } }, [a('div', { staticClass: 'd-flex justify-content-center' }, [t.requestLoading ? a('b-button', { staticClass: 'button-orange-modal' }, [a('spinner-loading')], 1) : a('b-button', { staticClass: 'button-orange-modal', attrs: { type: 'submit' } }, [a('i', { staticClass: 'las la-plus' })])], 1)])], 1)], 1)] } }]) })], 1) }; var d = []; var u = a('5530'); var p = a('c38f'); var m = a.n(p); var f = { props: { requestLoading: { type: Boolean, default: !1 } }, components: { flatPickr: m.a }, data: function () { return { promotion_type: 'package', allPromotionTypes: ['package', 'discount', 'buy_x get_y'], info: { offer_title: '', description: '', start_date: '', end_date: '' }, packages: { package: '', price_egp: '', price_euro: '', price_dollar: '', discount_price_egp: '', discount_price_dollar: '', discount_price_euro: '' }, buy2Get1: { buy_x: '', get_y: '' }, discount: { discount_price_egp: '' } } }, methods: { savePromotion: function () { var t = {}; t = this.promotion_type === 'package' ? Object(u.a)(Object(u.a)({}, this.info), {}, { promotion_type: this.promotion_type }, this.packages) : this.promotion_type === 'discount' ? Object(u.a)(Object(u.a)({}, this.info), {}, { promotion_type: this.promotion_type }, this.discount) : Object(u.a)(Object(u.a)({}, this.info), {}, { promotion_type: this.promotion_type }, this.buy2Get1), this.$emit('savePromotion', t) } }, computed: {}, created: function () {} }; var b = f; var _ = (a('c605'), a('2877')); var g = Object(_.a)(b, c, d, !1, null, '19a4c334', null); var v = g.exports; var y = { data: function () { return { reloadTable: !1, requestLoading: !1, transProps: { name: 'flip-list' }, allData: [], pagination: { currentPage: 1, per_page: 10, total: 6 }, columns: [{ label: 'Promotion Type', key: 'promotion_type', class: 'text-left' }, { label: 'Offer', key: 'offer_title', class: 'text-left' }, { label: 'Start Date', key: 'start_date', class: 'text-left' }, { label: 'End Date', key: 'end_date', class: 'text-left' }, { label: 'Description', key: 'description', class: 'text-left' }, { label: 'Likes', key: 'likes', class: 'text-left' }, { label: 'Views', key: 'views', class: 'text-left' }, { label: 'Actions', key: 'actions', class: 'text-left' }], typeOfModal: 'add', data: [], type: 'current', loadingTable: !1, rowId: '', editPromotions: { start_date: '', end_date: '', _method: 'put' } } }, components: { promotionDetails: v }, watch: { type: function () { this.getAllData() } }, methods: { isSelected: function (t) { if (this.type === t) return !0 }, getAllData: function () { var t = this; this.loadingTable = !0, s.getAllPromotions(this.pagination.currentPage, this.type).then(function (e) { t.data = e.data.data.data, t.pagination = { currentPage: e.data.data.current_page, per_page: e.data.data.per_page, total: e.data.data.total } }).finally(function () { t.loadingTable = !1 }) }, end: function (t, e) { l.a.$emit('openDeleteModal', { actionHeader: 'End', titleHeader: 'Promotion', textContent: e, url: 'promotions', rowId: t, question: 'Are You Sure You Want Delete This Promotion?', textDeleteButton: 'YES, END', textCancelButton: 'NO, CANCEL', icon: '', type: 'delete', actionOnAlert: '' }) }, reEnd: function (t) { this.rowId = t, this.$bvModal.show('promotionEdit') }, editPromotion: function () { var t = this; this.requestLoading = !0, s.editPromotion(this.rowId, this.editPromotions).then(function (e) { i.c.showSnackbar('success', e.data.message), t.getAllData(), t.$bvModal.hide('promotionEdit') }).finally(function () { t.requestLoading = !1 }) }, savePromotion: function (t) { var e = this; this.requestLoading = !0, s.addPromotion(t).then(function (t) { i.c.showSnackbar('success', t.data.message), e.getAllData(), e.$bvModal.hide('promotionDetails') }).finally(function () { e.requestLoading = !1 }) } }, mounted: function () { var t = this; i.c.index(), l.a.$on('reloadTableAfterDelete', function (e) { t.getAllData() }) }, created: function () { this.getAllData() } }; var k = y; var h = Object(_.a)(k, o, r, !1, null, null, null); e.default = h.exports } }])
// # sourceMappingURL=chunk-4c455781.84b9f7c9.js.map
