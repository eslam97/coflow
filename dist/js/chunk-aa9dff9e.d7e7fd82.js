(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa9dff9e"],{"9e7d":function(t,o,a){"use strict";a.r(o);var e=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("b-container",{attrs:{fluid:""}},[a("main-modal",{attrs:{id:"accommodationsDetailsModal",size:"xl"},scopedSlots:t._u([{key:"header",fn:function(){return["add"==t.typeOfModal?a("h4",{staticClass:"font-weight-bold"},[a("span",{staticClass:"text-warning"},[t._v("Add: ")]),t._v(" Accommodation")]):a("h4",{staticClass:"font-weight-bold"},[a("span",{staticClass:"text-info"},[t._v("Edit: ")]),t._v(" Accommodation")])]},proxy:!0},{key:"body",fn:function(){return[a("accommodations-details",{attrs:{requestLoading:t.requestLoading,accommodationsDetails:t.accommodationsDetails,typeOfModal:t.typeOfModal},on:{addAccommodation:t.addAccommodation,editAccommodation:t.editAccommodation}})]},proxy:!0}])}),a("main-modal",{attrs:{id:"accommodationDetailsViewModal",size:"lg",border:"true"},scopedSlots:t._u([{key:"header",fn:function(){return[a("h4",{staticClass:"font-weight-bold"},[a("span",{staticClass:"text-success-light"},[t._v("View: ")]),t._v(" Accommodation")])]},proxy:!0},{key:"borderHeader",fn:function(){return[t.accommodationsDetails?a("span",{staticClass:"p-4 borderHeaderModal m-0"},[t._v(" "+t._s(t.accommodationsViewData.name)+", "+t._s(t.accommodationsViewData.type)+" ")]):t._e()]},proxy:!0},{key:"body",fn:function(){return[a("accommodations-view",{attrs:{accommodationsDetails:t.accommodationsDetails}})]},proxy:!0}])}),a("b-row",[a("b-col",{staticClass:"mb-2 d-flex justify-content-between align-items-center",attrs:{lg:"12"}},[a("h3",[t._v("Accommodations")]),a("div",[a("b-button",{staticClass:"add_button text-white",attrs:{variant:"warning"},on:{click:t.openPopup}},[t._v(" Add Accommodation"),a("i",{staticClass:"las la-plus ml-3"})])],1)]),a("b-col",{attrs:{lg:"12"}},[a("main-table",{staticClass:"mb-0 table-borderless",attrs:{fields:t.columns,list_url:"accommodations",reloadData:t.reloadTable},on:{sortChanged:t.sortChanged}})],1)],1)],1)},i=[],s=(a("d3b7"),a("b0c0"),a("bcae")),c=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",[a("validationObserver",{scopedSlots:t._u([{key:"default",fn:function(o){var e=o.handleSubmit;return[a("b-form",{on:{submit:function(o){return o.preventDefault(),e(t.addAccommodations)}}},[a("b-row",[a("b-col",{staticClass:"mb-3",attrs:{lg:"6"}},[a("b-row",[a("b-col",{staticClass:"mb-3",attrs:{md:"6"}},[a("input-form",{attrs:{placeholder:"Write accommodation name",validate:"required",name:"Accommodation name",label:"Accommodation Name"},model:{value:t.accommodations.name,callback:function(o){t.$set(t.accommodations,"name",o)},expression:"accommodations.name"}})],1),a("b-col",{staticClass:"mb-3",attrs:{md:"6"}},[a("main-select",{attrs:{labelTitle:"Type",validate:"required",name:"Accommodation type",placeholder:"Choose",options:t.allAccommodationsTypes,label:"name",reduce:function(t){return t.id}},model:{value:t.accommodations.accommodation_type_id,callback:function(o){t.$set(t.accommodations,"accommodation_type_id",o)},expression:"accommodations.accommodation_type_id"}})],1)],1),a("b-row",[a("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[a("validation-provider",{staticClass:"flex-grow-1",attrs:{name:"EGP price",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(o){var e=o.errors;return[a("b-form-group",{attrs:{label:"Price"}},[a("b-input-group",{attrs:{append:"EGP"}},[a("b-form-input",{class:[{"is-invalid":e.length>0}],attrs:{placeholder:"000.00",validate:"required"},model:{value:t.accommodations.price_egp,callback:function(o){t.$set(t.accommodations,"price_egp",o)},expression:"accommodations.price_egp"}})],1)],1)]}}],null,!0)})],1),a("b-col",{staticClass:"mb-5 pt-4",attrs:{md:"4"}},[a("b-form-checkbox",{staticClass:"custom-checkbox-color-check mb-2 mr-sm-2 mb-sm-0",attrs:{type:"checkbox",color:"warning"},model:{value:t.selectedEGP,callback:function(o){t.selectedEGP=o},expression:"selectedEGP"}},[t._v(" Discounted Price ")])],1),a("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[a("validation-provider",{staticClass:"flex-grow-1",attrs:{name:"Discounted EGP price",rules:"numeric"},scopedSlots:t._u([{key:"default",fn:function(o){var e=o.errors;return[a("b-form-group",{attrs:{label:"Discounted Price"}},[a("b-input-group",{attrs:{append:"EGP"}},[a("b-form-input",{class:[{"is-invalid":e.length>0&&t.selectedEGP}],attrs:{placeholder:"000.00",validate:t.selectedEGP?"required":"",disabled:!t.selectedEGP},model:{value:t.accommodations.discount_price_egp,callback:function(o){t.$set(t.accommodations,"discount_price_egp",o)},expression:"accommodations.discount_price_egp"}})],1)],1)]}}],null,!0)})],1)],1),a("b-row",[a("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[a("validation-provider",{staticClass:"flex-grow-1",attrs:{name:"EURO price",rules:"numeric"},scopedSlots:t._u([{key:"default",fn:function(o){var e=o.errors;return[a("b-form-group",{attrs:{label:"Foreigner Price"}},[a("b-input-group",{attrs:{append:"EUR"}},[a("b-form-input",{class:[{"is-invalid":e.length>0}],attrs:{placeholder:"000.00"},model:{value:t.accommodations.price_euro,callback:function(o){t.$set(t.accommodations,"price_euro",o)},expression:"accommodations.price_euro"}})],1)],1)]}}],null,!0)})],1),a("b-col",{staticClass:"mb-5 pt-4",attrs:{md:"4"}},[a("b-form-checkbox",{staticClass:"custom-checkbox-color-check mb-2 mr-sm-2 mb-sm-0",attrs:{type:"checkbox",color:"warning"},model:{value:t.selectedEUR,callback:function(o){t.selectedEUR=o},expression:"selectedEUR"}},[t._v(" Discounted Price ")])],1),a("b-col",{staticClass:"mb-3",attrs:{md:"4"}},[a("validation-provider",{staticClass:"flex-grow-1",attrs:{name:"Discounted EURO price",rules:"numeric"},scopedSlots:t._u([{key:"default",fn:function(o){var e=o.errors;return[a("b-form-group",{attrs:{label:"Discounted Price"}},[a("b-input-group",{attrs:{append:"EUR"}},[a("b-form-input",{class:[{"is-invalid":e.length>0&&t.selectedEUR}],attrs:{placeholder:"000.00",validate:t.selectedEUR?"required":"",disabled:!t.selectedEUR},model:{value:t.accommodations.discount_price_euro,callback:function(o){t.$set(t.accommodations,"discount_price_euro",o)},expression:"accommodations.discount_price_euro"}})],1)],1)]}}],null,!0)})],1)],1),a("validation-provider",{staticClass:"flex-grow-1",attrs:{name:"Conditions",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var e=o.errors;return[a("b-form-group",{attrs:{label:"Conditions"}},[a("b-form-textarea",{class:[{"is-invalid":e.length>0}],attrs:{placeholder:"Any age, health, or weight requirements to participate",rows:"2"},model:{value:t.accommodations.conditions,callback:function(o){t.$set(t.accommodations,"conditions",o)},expression:"accommodations.conditions"}})],1)]}}],null,!0)})],1),a("b-col",{staticClass:"mb-3",attrs:{lg:"6"}},[a("main-select",{attrs:{labelTitle:"Amenities",validate:"required",taggable:!0,multiple:"",name:"Amenities",placeholder:"Add multiple tags",numberOfSelect:3},model:{value:t.accommodations.amenities,callback:function(o){t.$set(t.accommodations,"amenities",o)},expression:"accommodations.amenities"}}),a("validation-provider",{staticClass:"flex-grow-1",attrs:{name:"Description",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var e=o.errors;return[a("b-form-group",{attrs:{label:"Description"}},[a("b-form-textarea",{class:[{"is-invalid":e.length>0}],attrs:{label:"accommodations",placeholder:"Write your description about this activityâ€¦.",rows:"4"},model:{value:t.accommodations.description,callback:function(o){t.$set(t.accommodations,"description",o)},expression:"accommodations.description"}})],1)]}}],null,!0)})],1)],1),a("b-row",[a("b-col",{staticClass:"mb-5",attrs:{md:"12"}},[a("cropper-images",{attrs:{label:"Upload Photos",removeLoadingUi:t.removeLoadingUi,progressLoading:t.progressBar,images:t.accommodations.images},on:{"cropper-save":t.saveGalleryImage,"remove-image":t.removeGalleryImage}})],1)],1),"view"!=t.typeOfModal?a("b-row",[a("b-col",{staticClass:"mt-4",attrs:{md:"12"}},["add"==t.typeOfModal?a("div",{staticClass:"d-flex justify-content-center"},[t.requestLoading?a("b-button",{staticClass:"button-orange-modal"},[a("spinner-loading")],1):a("b-button",{staticClass:"button-orange-modal",attrs:{type:"submit"}},[a("i",{staticClass:"las la-plus"})])],1):t._e(),"edit"==t.typeOfModal?a("div",{staticClass:"d-flex justify-content-center"},[t.requestLoading?a("b-button",{staticClass:"button-blue-modal"},[a("spinner-loading")],1):a("b-button",{staticClass:"button-blue-modal",attrs:{type:"submit"}},[a("i",{staticClass:"las la-pen"})])],1):t._e()])],1):t._e()],1)]}}])})],1)},n=[],l=a("5530"),r=(a("d81d"),a("c740"),a("a434"),a("a4d3"),a("e01a"),a("5636")),d=a("df21"),m={props:{requestLoading:{type:Boolean,default:!1,required:!1},typeOfModal:{type:String,default:"add",required:!1},accommodationsDetails:{required:!1}},data:function(){return{accommodations:{name:"",requirements:"",conditions:"",description:"",price_egp:"",price_euro:"",price_dollar:0,discount_price_egp:"",discount_price_euro:"",status:"active",images:[],amenities:"",accommodation_type_id:""},selectedEGP:"",selectedEUR:"",allAccommodationsTypes:[],loadingGallery:0,progressBar:0,removeLoadingUi:!1}},components:{},methods:{addAccommodations:function(){this.accommodations.price_euro=this.accommodations.price_euro?this.accommodations.price_euro:0,this.accommodations.price_dollar=this.accommodations.price_dollar?this.accommodations.price_dollar:0,this.accommodations.discount_price_egp=this.selectedEGP?this.accommodations.discount_price_egp:"",this.accommodations.discount_price_euro=this.selectedEUR?this.accommodations.discount_price_euro:"","add"===this.typeOfModal?this.$emit("addAccommodation",Object(l["a"])(Object(l["a"])({},this.accommodations),{},{images:this.accommodations.images.map((function(t){return t.id}))})):(console.log(this.accommodations),this.$emit("editAccommodation",Object(l["a"])(Object(l["a"])({},this.accommodations),{},{images:this.accommodations.images.map((function(t){return t.id})),_method:"put"})))},saveGalleryImage:function(t){var o=this;this.removeLoadingUi=!1,this.requestLoading=!0;var a=new FormData;a.append("image",t.image),a.append("type","accommodation"),a.append("status",this.accommodationsDetails?"exist":"new"),a.append("name",t.imageInfo.name),this.accommodationsDetails&&a.append("accommodation_id",this.accommodationsDetails.id);var e={onUploadProgress:function(t){var a=t.loaded,e=t.total,i=Math.floor(100*a/e);o.progressBar=i}};r["a"].addImage(a,e).then((function(t){s["c"].showSnackbar("success",t.data.message),o.accommodations.images.push(t.data.data),o.removeLoadingUi=!0,o.requestLoading=!1}))},removeGalleryImage:function(t){var o=this;r["a"].removeImage(t,"accommodation").then((function(a){s["c"].showSnackbar("success",a.data.message);var e=o.accommodations.images.findIndex((function(o){return o.id===t}));o.accommodations.images.splice(e,1)}))},getAllAccommodationsTypes:function(){var t=this;d["a"].getAllAccommodationTypes().then((function(o){t.allAccommodationsTypes=o.data.data}))}},watch:{},computed:{},created:function(){this.getAllAccommodationsTypes(),this.accommodationsDetails&&(this.accommodationsDetails.discount_price_egp&&(this.selectedEGP=!0),this.accommodationsDetails.discount_price_euro&&(this.selectedEUR=!0),this.accommodations={name:this.accommodationsDetails.name,requirements:this.accommodationsDetails.requirements,conditions:this.accommodationsDetails.conditions,description:this.accommodationsDetails.description,price_egp:this.accommodationsDetails.price_egp,price_euro:this.accommodationsDetails.price_euro?this.accommodationsDetails.price_euro:"",price_dollar:this.accommodationsDetails.price_dollar?this.accommodationsDetails.price_dollar:"",discount_price_egp:this.accommodationsDetails.discount_price_egp,discount_price_euro:this.accommodationsDetails.discount_price_euro,status:this.accommodationsDetails.status,images:this.accommodationsDetails.images,amenities:this.accommodationsDetails.amenities,accommodation_type_id:this.accommodationsDetails.accommodation_type_id})}},u=m,p=a("2877"),b=Object(p["a"])(u,c,n,!1,null,null,null),f=b.exports,g=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"pl-3 pr-3"},[a("b-row",[a("b-col",{staticClass:"border-right py-5",attrs:{lg:"6","order-lg":"1",order:"2"}},[a("h5",{staticClass:"mb-4 font-size-14"},[t._v("ACCOMMODATION INFORMATION")]),a("b-row",{staticClass:"pl-3 mb-2"},[a("b-col",{staticClass:"infoKey",attrs:{md:"12"}},[a("p",[t._v("Description")])]),a("b-col",{staticClass:"infoValue",attrs:{md:"12"}},[a("p",[t._v(t._s(t.accommodationsDetails.description))])])],1),a("b-row",{staticClass:"pl-3 mb-2"},[a("b-col",{staticClass:"infoKey",attrs:{md:"6"}},[a("p",[t._v("Price")]),a("p",{staticClass:"text-black font-weight-bold"},[t._v("EGP "+t._s(t.accommodationsDetails.price_egp))])]),a("b-col",{staticClass:"infoKey",attrs:{md:"6"}},[a("p",[t._v("Discounted price")]),a("p",{staticClass:"text-black font-weight-bold"},[t.accommodationsDetails.discount_price_egp?a("span",[t._v(" EGP "+t._s(t.accommodationsDetails.discount_price_egp))]):a("span",[t._v("N/A")])])]),a("b-col",{staticClass:"infoKey",attrs:{md:"6"}},[a("p",[t._v("Price EUR")]),a("p",{staticClass:"text-black font-weight-bold"},[t._v("EUR "+t._s(t.accommodationsDetails.price_euro))])]),a("b-col",{staticClass:"infoKey",attrs:{md:"6"}},[a("p",[t._v("Discounted price")]),a("p",{staticClass:"text-black font-weight-bold"},[t.accommodationsDetails.discount_price_euro?a("span",[t._v(" EUR "+t._s(t.accommodationsDetails.discount_price_euro))]):a("span",[t._v("N/A")])])])],1),a("b-row",{staticClass:"pl-3 mb-2"},[a("b-col",{staticClass:"infoKey",attrs:{md:"12"}},[a("p",[t._v("Conditions")])]),a("b-col",{staticClass:"infoValue",attrs:{md:"12"}},[a("p",[t._v(t._s(t.accommodationsDetails.conditions))])])],1)],1),a("b-col",{staticClass:"py-5",attrs:{lg:"6","order-lg":"2",order:"1"}},[a("h5",{staticClass:"mb-4 font-size-14"},[t._v("ACCOMMODATION PHOTOS")]),a("slider-thumbs",{attrs:{images:t.accommodationsDetails.images}})],1)],1)],1)},h=[],_={props:{accommodationsDetails:{type:Object}}},v=_,y=Object(p["a"])(v,g,h,!1,null,null,null),w=y.exports,C=a("bb36"),D={addNewAccommodation:function(t){return Object(C["a"])().post("accommodations",t)},getAccommodationsDetails:function(t){return Object(C["a"])().get("accommodations/".concat(t))},editAccommodation:function(t,o){return Object(C["a"])().post("accommodations/".concat(t),o)}},A={data:function(){return{reloadTable:!1,requestLoading:!1,columns:[{label:"#",key:"id",class:"text-left"},{label:"Accommodation Name",key:"name",class:"text-left"},{label:"Type",key:"accommodation_type.name",class:"text-left"},{label:"Description",key:"description",class:"text-left"},{label:"Price EGP/EUR",key:"price_egp,price_euro",class:"text-left",type:"multi-value",pre:"EGP,EUR"},{label:"Discounted Price",key:"discount_price_egp,discount_price_euro",class:"text-left",type:"multi-value"},{label:"Conditions",key:"conditions",class:"text-left"},{label:"Amenities",key:"amenities",class:"text-left",type:"array"},{label:"Photos",key:"images",class:"text-left",type:"multi_image"},{label:"Change Status",key:"change_status",type:"switch",tableType:"accommodation",idKey:"accommodation_id",class:"text-left"},{label:"Actions",key:"actions",class:"text-left",type:"actions",actions:[{icon:"las la-eye",color:"success-light",text:"View",actionName:"showAccommodations",actionParams:"fullObj"},{icon:"las la-pen",color:"info",text:"Edit",actionName:"showAccommodationsToEdit",actionParams:"fullObj"},{icon:"las la-trash-alt",color:"danger",text:"Delete",showAlert:!0,actionHeader:"Delete",titleHeader:"Accommodations",textContent:"name",url:"accommodations"}]}],typeOfModal:"add",accommodationsDetails:{},accommodationsViewData:{},accommodationsId:""}},components:{accommodationsDetails:f,accommodationsView:w},methods:{sortChanged:function(t){console.log(t)},openPopup:function(){this.accommodationsId="",this.typeOfModal="add",this.accommodationsDetails=!1,this.$bvModal.show("accommodationsDetailsModal")},addAccommodation:function(t){var o=this;this.requestLoading=!0,this.reloadTable=!1,D.addNewAccommodation(t).then((function(t){o.reloadTable=!0,s["c"].showSnackbar("success",t.data.message),o.$bvModal.hide("accommodationsDetailsModal")})).finally((function(){o.requestLoading=!1}))},editAccommodation:function(t){var o=this;this.requestLoading=!0,this.reloadTable=!1,D.editAccommodation(this.accommodationsId,t).then((function(t){o.reloadTable=!0,s["c"].showSnackbar("success",t.data.message),o.$bvModal.hide("accommodationsDetailsModal")})).finally((function(){o.requestLoading=!1}))},showDetails:function(t){this.accommodationsViewData.name=t.name,this.accommodationsViewData.type=t.accommodation_type.name,this.accommodationsDetails=t,this.accommodationsId="",this.typeOfModal="view",this.$bvModal.show("accommodationDetailsViewModal")},showAccommodationsToEdit:function(t){this.typeOfModal="edit",this.accommodationsId=t.id,this.accommodationsDetails=t,this.$bvModal.show("accommodationsDetailsModal")}},created:function(){this.$root.$on("showAccommodations",this.showDetails),this.$root.$on("showAccommodationsToEdit",this.showAccommodationsToEdit)},beforeDestroy:function(){this.$root.$off("showAccommodations"),this.$root.$off("showAccommodationsToEdit")},mounted:function(){s["c"].index()}},O=A,x=Object(p["a"])(O,e,i,!1,null,null,null);o["default"]=x.exports},df21:function(t,o,a){"use strict";var e=a("bb36");o["a"]={getProfileSettings:function(){return Object(e["a"])().get("settings")},updateProfileSettings:function(t){return Object(e["a"])().post("settings",t)},getAllActivityLine:function(){return Object(e["a"])().get("activityLines")},addNewActivityLine:function(t){return Object(e["a"])().post("activityLines",t)},getAllActivityType:function(){return Object(e["a"])().get("activityTypes")},addNewActivityType:function(t){return Object(e["a"])().post("activityTypes",t)},getDurationList:function(){return Object(e["a"])().get("durationLists")},addNewDurationList:function(t){return Object(e["a"])().post("durationLists",t)},getAllnationalities:function(){return Object(e["a"])().get("nationalities")},addNewNationality:function(t){return Object(e["a"])().post("nationalities",t)},getAllAccommodationTypes:function(){return Object(e["a"])().get("accommodationTypes")},addNewAccommodationType:function(t){return Object(e["a"])().post("accommodationTypes",t)},getAllLinks:function(){return Object(e["a"])().get("links")},addNewLink:function(t){return Object(e["a"])().post("links",t)},getAllLanguages:function(){return Object(e["a"])().get("languages")},addNewLanguage:function(t){return Object(e["a"])().post("languages",t)},getAllCountries:function(){return Object(e["a"])().get("countries")},getCountryCity:function(t){return Object(e["a"])().get("countries/".concat(t))},addNewCountry:function(t){return Object(e["a"])().post("countries",t)},getAllCities:function(){return Object(e["a"])().get("cities")},addNewCity:function(t){return Object(e["a"])().post("cities",t)},getCityArea:function(t){return Object(e["a"])().get("cities/".concat(t))},getAllAreas:function(){return Object(e["a"])().get("areas")},addNewArea:function(t){return Object(e["a"])().post("areas",t)},getAllAmenities:function(){return Object(e["a"])().get("amenities")}}}}]);
//# sourceMappingURL=chunk-aa9dff9e.d7e7fd82.js.map